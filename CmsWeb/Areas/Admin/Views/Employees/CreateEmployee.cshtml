@using CmsDataAccess.Enums;
<!-- google font -->
<link href="https://fonts.googleapis.com/css2?family=Open+Sans:wght@400;600&display=swap" rel="stylesheet">

@model CompanyEmployee


@addTagHelper *, Kendo.Mvc
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers

<link href="~/mnm/css/kednoedit.css" rel="stylesheet" />


@{
    SelectList jt = new SelectList(JobTypeEnum.JobTypes, "Id", "Name");

}

@*<partial name="_EmployeesHorzBar" />*@
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.js" integrity="sha512-+k1pnlgt4F1H8L7t3z95o3/KO+o78INEcXTbnoJQ/F2VqDVhWoaiVml/OEHv9HsVgxUaVW+IbiZPUJQfF/YxZw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.20.0/jquery.validate.min.js" integrity="sha512-WMEKGZ7L5LWgaPeJtw9MBM4i5w5OSBlSjTjCtSnvFJGSVD26gE5+Td12qN5pvWXhuWaWcVwF++F7aqu9cvqP0A==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validation-unobtrusive/4.0.0/jquery.validate.unobtrusive.min.js" integrity="sha512-xq+Vm8jC94ynOikewaQXMEkJIOBp7iArs3IhFWSWdRT3Pq8wFz46p+ZDFAR7kHnSFf+zUv52B3prRYnbDRdgog==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<partial name="_MyBreadCrumb" />


<h2 class="text-danger">@ViewBag.ErrorMessage</h2>




<form id="signUpForm" asp-action="CreateEmployee" method="post" enctype='multipart/form-data' class="k-form k-form-vertical">



    <div class="demo-section k-content wide">
        <kendo-wizard name="wizard" on-done="onDone" on-select="onSelect">
            <wizard-steps>

                <wizard-step title="Basic Info">
                    <wizard-step-buttons>
                        <wizard-step-button name="next" text="Next"></wizard-step-button>
                    </wizard-step-buttons>
                    <wizard-step-content>


                        <div class="row mb-3" style=" width:100%;align-items:center;justify-content:center">
                            <div onclick="document.getElementById('ImageFile').click()" class="picCircle" id="prevImg" style="cursor:pointer;">
                            </div>

                            <center>
                                <div>
                                    <span class="fa fa-image !important">
                                        <span style="font-size:20px ;font-family: sans-serif;cursor:pointer;font-weight: bold; color: var(--darkBlue);"
                                              onclick="document.getElementById('ImageFile').click()">
                                            &nbsp Select employee image
                                        </span>
                                    </span>
                                    <input type="file" id="ImageFile" onchange="preview()" accept="image/*" style="display:none" name="ImageFile">
                                </div>
                            </center>
                        </div>

                        <div class="row" style="width:100%">
                            <div class="mb-3 col-4">
                                <label style="display:flex" asp-for="@Model.FirstName"></label>
                                <input class="form-control" asp-for="@Model.FirstName">
                                <span class="text-danger" asp-validation-for="FirstName"></span>
                            </div>

                            <div class="mb-3 col-4">
                                <label  style="display:flex" asp-for="@Model.MiddleName"></label>
                                <input  class="form-control" asp-for="@Model.MiddleName">
                                <span class="text-danger" asp-validation-for="MiddleName"></span>
                            </div>

                            <div class="mb-3 col-4">
                                <label style="display:flex" asp-for="@Model.LastName"></label>
                                <input class="form-control" asp-for="@Model.LastName">
                                <span class="text-danger" asp-validation-for="LastName"></span>
                            </div>
                        </div>

                        <div class="row" style="width:100%">

                            <div class="mb-3 col-4">
                                <label style="display:flex" asp-for="@Model.Nationality"></label>
                                <input class="form-control" asp-for="@Model.Nationality">
                                <span class="text-danger" asp-validation-for="Nationality"></span>

                            </div>

                            <div class="mb-3 col-4">
                                <label style="display:flex" asp-for="@Model.PassportNumber"></label>
                                <input class="form-control" asp-for="@Model.PassportNumber">
                                <span class="text-danger" asp-validation-for="PassportNumber"></span>
                            </div>

                            <div class="mb-3 col-4">
                                <label style="display:flex" asp-for="@Model.NationalCardId"></label>
                                <input class="form-control" asp-for="@Model.NationalCardId" placeholder="784-xxxx-xxxxxxx-x">
                                <span class="text-danger" asp-validation-for="NationalCardId"></span>
                            </div>

                            <div class="mb-3 col-4">
                                <label style="display:flex" asp-for="@Model.Type"></label>
                                <select class="form-select form-select-md mb-3" asp-for="@Model.Type" asp-items="@jt"></select>
                                <span class="text-danger" asp-validation-for="Type"></span>
                            </div>

                            <div class="mb-3 col-4">
                                <label style="display:flex" asp-for="@Model.JobCardNumber"></label>
                                <input class="form-control" asp-for="@Model.JobCardNumber" >
                                <span class="text-danger" asp-validation-for="JobCardNumber"></span>
                            </div>

                        </div>



                        <div class="row" style="width:100%">
                            <div class="mb-3 col-12">
                                <label style="display:flex" asp-for="@Model.Description"></label>
                                <input class="form-control" asp-for="@Model.Description">
                                <span class="text-danger" asp-validation-for="Description"></span>
                            </div>
                        </div>
                    </wizard-step-content>
                </wizard-step>

                <wizard-step title="Address">
                    <wizard-step-buttons>
                        <wizard-step-button name="previous" text="Previous"></wizard-step-button>
                        <wizard-step-button name="next" text="Next"></wizard-step-button>
                    </wizard-step-buttons>
                    <wizard-step-content>

                        <div class="row" style="align-items:center; width:100%">

                            <div class="mb-3 col-12">

                                <div class="row">
                                    <div class="mb-3 col-6">
                                        <label style="display:flex" asp-for="@Model.CenterAddress.Country"></label>
                                        <input class="form-control" asp-for="@Model.CenterAddress.Country">
                                        <span class="text-danger" asp-validation-for="CenterAddress.Country"></span>
                                    </div>

                                    <div class="mb-3 col-6">
                                        <label style="display:flex" asp-for="@Model.CenterAddress.State"></label>
                                        <input class="form-control" asp-for="@Model.CenterAddress.State">
                                        <span class="text-danger" asp-validation-for="CenterAddress.State"></span>
                                    </div>

                                    <div class="mb-3 col-6">
                                        <label style="display:flex" asp-for="@Model.CenterAddress.City"></label>
                                        <input class="form-control" asp-for="@Model.CenterAddress.City">
                                        <span class="text-danger" asp-validation-for="CenterAddress.City"></span>
                                    </div>
                                    <div class="mb-3 col-6">
                                        <label style="display:flex" asp-for="@Model.CenterAddress.AddressDetails"></label>
                                        <input class="form-control" asp-for="@Model.CenterAddress.AddressDetails">
                                        <span class="text-danger" asp-validation-for="CenterAddress.AddressDetails"></span>
                                    </div>
                                </div>


                            </div>

                        </div>

                    </wizard-step-content>
                </wizard-step>

 

                <wizard-step title="Account Info">
                    <wizard-step-buttons>
                        <wizard-step-button name="previous" text="Previous"></wizard-step-button>
                        <wizard-step-button name="done" text="Save"></wizard-step-button>
                    </wizard-step-buttons>
                    <wizard-step-content>

                        <div class="row" style="align-items:center; width:100%">


                            <div class="mb-3 col-12">

                                <div class="row">
                                    <div class="mb-3 col-6">
                                        <label style="display:flex" asp-for="@Model.EmployeeEmail"></label>
                                        <input class="form-control" type="email" asp-for="@Model.EmployeeEmail">
                                        <span class="text-danger" asp-validation-for="@Model.EmployeeEmail"></span>
                                    </div>

                                    <div class="mb-3 col-6">
                                        <label style="display:flex" asp-for="@Model.EmployeePhone"></label>
                                        <input class="form-control" type="tel" asp-for="@Model.EmployeePhone">
                                        <span class="text-danger" asp-validation-for="@Model.EmployeePhone"></span>
                                    </div>

                                    <div class="mb-3 col-6">
                                        <label style="display:flex" asp-for="@Model.EmployeeUserName"></label>
                                        <input class="form-control" asp-for="@Model.EmployeeUserName">
                                        <span class="text-danger" asp-validation-for="@Model.EmployeeUserName"></span>
                                    </div>


                                    <div class="mb-3 col-6">
                                        <label style="display:flex" asp-for="@Model.Password"></label>
                                        <input class="form-control" type="text" asp-for="@Model.Password" required>
                                        <span class="text-danger" asp-validation-for="@Model.Password"></span>
                                    </div>

                                </div>


                            </div>

                        </div>

                    </wizard-step-content>
                </wizard-step>

            </wizard-steps>
        </kendo-wizard>
    </div>
</form>


<script>
    function onDone(e) {
        e.originalEvent.preventDefault();
        var validator = $("#signUpForm").kendoValidator().data("kendoValidator");

        if (validator.validate()) {
            //kendo.alert("تم إضافة المركز بنجاح");
            $("#signUpForm").submit();
        }
    }




    function onSelect(e) {
        


        if (e.step.options.index == 1) {
            var validator1 = $("#FirstName").kendoValidator().data("kendoValidator");
            var validator2 = $("#MiddleName").kendoValidator().data("kendoValidator");
            var validator3 = $("#LastName").kendoValidator().data("kendoValidator");
            var validator4 = $("#Nationality").kendoValidator().data("kendoValidator");
            var validator5 = $("#PassportNumber").kendoValidator().data("kendoValidator");
            var validator6 = $("#NationalCardId").kendoValidator().data("kendoValidator");

            if (
                validator1.validate()==false ||
                validator2.validate()==false ||
                validator3.validate() == false ||
                validator4.validate()==false ||
                validator5.validate() == false ||
                validator6.validate() == false 

            
            ) {
                e.preventDefault();

            }

            return;
        }
        if (e.step.options.index == 2) {

            var validator1 = $("#CenterAddress_Country").kendoValidator().data("kendoValidator");
            var validator2 = $("#CenterAddress_State").kendoValidator().data("kendoValidator");
            var validator3 = $("#CenterAddress_City").kendoValidator().data("kendoValidator");
            var validator4 = $("#CenterAddress_AddressDetails").kendoValidator().data("kendoValidator");

            if (
                validator1.validate() == false ||
                validator2.validate() == false ||
                validator3.validate() == false ||
                validator4.validate() == false 

            ) {
                e.preventDefault();

            }



            return;
        }

    };

</script>



<script>


    function preview(evt) {
        var filee = event.target.files[0];
        document.getElementById('prevImg').style.backgroundImage = "url('" + URL.createObjectURL(filee) + "')";

    }
</script>













